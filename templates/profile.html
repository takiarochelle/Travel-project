{% extends 'base.html' %}

{% block title %}Profile{% endblock %}

{% block content %}

    <nav class="navbar">
        <button onclick="homepage()">Home</button>
        <button onclick="logout()">Logout</button>
    </nav>
    <br>
    <h1>Welcome, {{ user.fname }}</h1>
    <br>
    <div class="container">
        <div class="row">
            <div id="profile-pic" class="col-6">
                <img src="../{{ user.image_file }}" id="profile-image" height="200" width="280">
                <br>
                <form id="upload-image" enctype="multipart/form-data" action="/my_submit" method="post">
                    <br>
                    <span>
                        <input type="file" name="my_photo" accept="image/*">
                        <br>
                        <input type="submit" id="submit-image" value="Upload">
                    </span>
                </form>
            </div>

            <div class="col-6 trip-list">
<!--                 <h5>Trips</h5>
 -->
                <div class="list-group">
                    {% for trip in user.created_trips %}
                      <a href="/{{ trip.trip_name }}-{{ trip.trip_id }}" class="list-group-item list-group-item-action">
                        {{ trip.trip_name }}
                        <br>
                        ({{ trip.start_date.strftime('%d-%b-%Y') }} - {{ trip.end_date.strftime('%d-%b-%Y') }})
                      </a>
                    {% endfor %}

                    {% for trip in user.trips %}
                      <a href="/{{ trip.trip_name }}-{{ trip.trip_id }}" class="list-group-item list-group-item-action">
                        {{ trip.trip_name }}
                        <br>
                        ({{ trip.start_date.strftime('%d-%b-%Y') }} - {{ trip.end_date.strftime('%d-%b-%Y') }})
                      </a>
                    {% endfor %}
                </div>
                <br>
                <button id="add-trip" onclick="redirect()">Add Trip</button>
            </div>
        </div>
    </div>


{% endblock %}
    
{% block script %}

    <script type="text/javascript">
        'use strict';

        function redirect() {
            window.location.assign('/add-trip');
        }

        function logout() {
            window.location.assign('/logout');
        }

        function homepage() {
            window.location.assign('/');
        }

    </script>

{% endblock %}


